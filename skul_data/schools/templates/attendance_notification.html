<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      body {
          font-family: Arial, sans-serif;
          line-height: 1.6;
          color: #333;
          max-width: 600px;
          margin: 0 auto;
          padding: 20px;
      }
      .header {
          background: {% if is_present %}#4caf50{% else %}#f44336{% endif %};
          color: white;
          padding: 20px;
          text-align: center;
          border-radius: 5px 5px 0 0;
      }
      .content {
          background: #f9f9f9;
          padding: 20px;
          border: 1px solid #ddd;
          border-top: none;
      }
      .info-box {
          background: white;
          padding: 15px;
          margin: 15px 0;
          border-left: 4px solid {% if is_present %}#4caf50{% else %}#f44336{% endif %};
      }
      .info-row {
          margin: 8px 0;
      }
      .label {
          font-weight: bold;
          color: #666;
      }
      .status {
          display: inline-block;
          padding: 5px 15px;
          border-radius: 20px;
          background: {% if is_present %}#4caf50{% else %}#f44336{% endif %};
          color: white;
          font-weight: bold;
      }
      .footer {
          text-align: center;
          padding: 20px;
          color: #666;
          font-size: 12px;
      }
      .button {
          display: inline-block;
          padding: 10px 20px;
          background: #8e4d91;
          color: white;
          text-decoration: none;
          border-radius: 5px;
          margin: 10px 0;
      }
    </style>
  </head>
  <body>
    <div class="header">
      <h1>
        {% if is_present %}✓ Attendance Confirmed{% else %}⚠ Absence Alert{%
        endif %}
      </h1>
      <p>{{ school.name }}</p>
    </div>

    <div class="content">
      <p>Dear {{ parent.user.first_name }},</p>

      {% if is_present %}
      <p>
        This is to confirm that
        <strong>{{ student.full_name }}</strong> attended class today.
      </p>
      {% else %}
      <p>
        <strong>{{ student.full_name }}</strong> was marked absent from class
        today.
      </p>
      {% endif %}

      <div class="info-box">
        <div class="info-row">
          <span class="label">Student:</span> {{ student.full_name }}
        </div>
        <div class="info-row">
          <span class="label">Class:</span> {{ class_name }}
        </div>
        <div class="info-row"><span class="label">Date:</span> {{ date }}</div>
        <div class="info-row">
          <span class="label">Time Recorded:</span> {{ time }}
        </div>
        <div class="info-row">
          <span class="label">Status:</span>
          <span class="status"
            >{% if is_present %}PRESENT{% else %}ABSENT{% endif %}</span
          >
        </div>
        {% if absence_reason %}
        <div class="info-row">
          <span class="label">Reason:</span> {{ absence_reason }}
        </div>
        {% endif %}
        <div class="info-row">
          <span class="label">Recorded by:</span> {{ recorded_by }}
        </div>
      </div>

      {% if not is_present %}
      <p style="color: #f44336; font-weight: bold">
        If this absence was unexpected or if the information is incorrect,
        please contact the school immediately.
      </p>
      {% endif %}

      <p>
        <a href="{{ school.website }}" class="button">Visit School Portal</a>
      </p>

      <p>
        Thank you,<br />
        <strong>{{ school.name }}</strong>
      </p>
    </div>

    <div class="footer">
      <p>This is an automated notification from {{ school.name }}</p>
      <p>
        Please do not reply to this email. For inquiries, contact the school
        directly.
      </p>
      {% if school.phone %}
      <p>Phone: {{ school.phone }}</p>
      {% endif %} {% if school.email %}
      <p>Email: {{ school.email }}</p>
      {% endif %}
    </div>
  </body>
</html>
